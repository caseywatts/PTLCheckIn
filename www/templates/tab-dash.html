<ion-view view-title="Dashboard">
<ion-content class="padding">
<div class="button-bar">
  <a ng-href="tel:{{$storage.callTo}}" class="button button-icon-left">
    <i class="icon ion-ios-telephone"></i>
    Phone
  </a>
  <a ng-click="newMessage()" class="button button-icon-left">
    <i class="icon ion-plus"></i>
    New
  </a>
</div>
<div class="list card" ng-repeat="message in $storage.messages">
  <div class="item item-body" ng-hide="editing">
    {{message.message}}
  </div>
  <div class="item item-body" ng-show="editing">
    <label class="item item-input">
      <textarea ng-model="message.message" class="item-input"></textarea>
    </label>
  </div>
  <div ng-hide="editing" class="item tabs tabs-secondary tabs-icon-left">
    <a ng-href="mailto:{{$storage.emailTo}}?body={{message.message}}" class="tab-item positive">
      <i class="icon ion-email"></i>
    </a>
    <a ng-href="sms:{{$storage.textTo}}?body={{message.message}}" class="tab-item calm">
      <i class="icon ion-android-textsms"></i>
    </a>
    <a ng-click="editing = true" class="tab-item royal">
      <i class="icon ion-edit"></i>
    </a>
  </div>
  <div ng-show="editing" class="item tabs tabs-secondary tabs-icon-left">
    <a ng-click="deleteMessage($index)" class="tab-item assertive">
      <i class="icon ion-trash-a"></i>
    </a>
    <a ng-click="editing = false" class="tab-item balanced">
      <i class="icon ion-checkmark"></i>
    </a>
  </div>
</div>
</ion-content>
</ion-view>
